<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gome.ocs.manager.dao.IUserRoleDao">

	<sql id="UserRoleColumn">
			online_role_id,online_user_id,company_id
  	</sql>

	<delete id="delUserRoleById"  parameterType="String">
		delete FROM user_role where user_role_id=#{userRoleId} and company_id=#{companyId}
	</delete>

	<delete id="batchDelUserRole" parameterType="java.util.List">
		delete FROM user_role
		where company_id = #{companyId} and user_role_id in
		<foreach collection="list" item="item" index="index" open="(" separator="," close=")">
			#{item.userRoleId}
		</foreach>
	</delete>

<!--
	<update id="batchUpdateUserRole" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="(" separator="," close=")">
			update user_role
			<set>
				<if test="roleId != null">
					online_role_id = #{item.roleId},
				</if>
				<if test="userId != null">
					online_user_id = #{item.userId},
				</if>
				<if test="companyId != null">
					company_id = #{companyId},
				</if>
			</set>
			where user_role_id = #{item.userRoleId} and company_id = #{companyId}
		</foreach>

	</update>
 -->
	<update id="updateUserRole" parameterType="String">
		update user_role
		<set>
			<if test="roleId != null">
				online_role_id = #{roleId},
			</if>
			<if test="userId != null">
				online_user_id = #{userId},
			</if>
			<if test="companyId != null">
				company_id = #{companyId},
			</if>
		</set>
		where user_role_id = #{userRoleId} and company_id = #{companyId}
	</update>

	<insert id="batchAddUserRole" parameterType="java.util.List">
		insert into user_role (online_role_id,online_user_id,company_Id)
		values
		<foreach collection="list" item="item" index="index" separator=",">
			(
				#{item.roleId},
				#{item.userId},
				#{item.companyId}
			)
		</foreach>
	</insert>

	<insert id="addUserRole" parameterType="String">
		INSERT INTO user_role
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="roleId != null">
				online_role_id,
			</if>
			<if test="userId != null">
				online_user_id,
			</if>
			<if test="companyId != null">
				company_Id,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="roleId != null">
				#{roleId},
			</if>
			<if test="userId != null">
				#{userId},
			</if>
			<if test="companyId != null">
				#{companyId},
			</if>
		</trim>
	</insert>

  	
</mapper>